---
title: "Music_Stim_Norm"
output: html_document
date: "2024-03-18"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
```

```{r}
data <- read.csv("../stimuli/sachs/SourceData_1.csv")

negative_potential_stims <- data %>%
  subset(song == 'stimuli/3_pieceB_joyous_anxious_sad' | song == 'stimuli/5_pieceB_calm_sad_anxious' | song == 'stimuli/6_pieceB_anxious_calm_joyous' | song == 'stimuli/7_pieceB_joyous_anxious_sad' | song == 'stimuli/11_pieceA_calm_anxious_sad' | song == 'stimuli/12_pieceA_joyous_sad_anxious')

neg_neg_portions <- negative_potential_stims %>%
  subset(valence_filt < 0) %>%
  subset(arousal_filt < 0)

ggplot(data=neg_neg_portions,
       aes(x = second, y = valence_filt)) +
theme_classic() +
  geom_point(aes(color = song))
  #theme(legend.position = "none") #uncomment this for a clearer timing est

neg_pos_portions <- negative_potential_stims %>%
  subset(valence_filt < 0) %>%
  subset(arousal_filt > 0)

ggplot(data=neg_pos_portions,
       aes(x = second, y = valence_filt)) +
theme_classic() +
  geom_point(aes(color = song)) +
  theme(legend.position = "none") #uncomment this  for a clearer timing est

pos_pos_portions <- negative_potential_stims %>%
  subset(valence_filt > 0) %>%
  subset(arousal_filt > 0)

ggplot(data=pos_pos_portions,
       aes(x = second, y = valence_filt)) +
theme_classic() +
  geom_point(aes(color = song))

pos_neg_portions <- negative_potential_stims %>%
  subset(valence_filt > 0) %>%
  subset(arousal_filt < 0)

ggplot(data=pos_neg_portions,
       aes(x = second, y = valence_filt)) +
theme_classic() +
  geom_point(aes(color = song)) +
  theme(legend.position = "none") #uncomment this for a clearer timing est


#next steps: double check no transitional periods (maybe after cropping), figure out length to crop at (maybe start w/ 10 or 8 s?)
  # 8 s sections from negative-negative stimuli
  # try 8 stimuli from each quadrant
  # try to avoid steep slope moments
  # if there's 10 seconds, can crop differentially so that they are around 8 listen to what's good
  # if its 16, can make two stimuli
  # normalize to -20 dB (RMS)
  # do a deeper dive across authors and find what emotion words that are good
  # 5 positive and 5 negative
  # can look at music papers not related to granularity
#in the Nook psych science paper, visual stims were presented for 6s (we'd prob want more but maybe not too much more)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
